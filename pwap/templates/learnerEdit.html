{% extends 'base.html' %}

{% block title %}
Learner edit
{% endblock title %}

{% block content %}

     <div class="container">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h2 class="panel-title">Learner edit</h2>
            </div>
            <div class="panel-body">
                <div class="btn btn-lg btn-block btn-primary" id="preview">Preview</div>
                <div class="row">
                	<h4>HTML</h4>
                    <div class="col-md-6"><div id="htmlEditor"></div></div>
                    <div class="col-md-6"><div id="mock"></div></div>
                </div>
                <div class="row">
                	<h4>CSS</h4>
                    <div class="col-md-6"><div id="cssEditor"></div></div>
                    <div class="col-md-6"><iframe id="iframe" sandbox="allow-scripts allow-pointer-lock allow-same-origin allow-popups allow-forms"></iframe></div>
                </div>
                
            </div>
        </div>
    </div>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-css.js"></script>
    <script type="text/javascript">
        var htmlEditor = ace.edit("htmlEditor");
        var cssEditor = ace.edit("cssEditor");
        htmlEditor.getSession().setMode("ace/mode/html");
        cssEditor.getSession().setMode("ace/mode/css");
        
        $(function() {
            $('#preview').on('click', function() {
                console.log(encodeURIComponent(htmlEditor.getValue()));
                $('#iframe').attr('src', 'localhost:3000/output.php?css=' + encodeURIComponent(cssEditor.getValue()) +
                	'?html=' + encodeURIComponent(htmlEditor.getValue()));
            });
        });     
    </script>

{% endblock content %}