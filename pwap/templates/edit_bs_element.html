{% extends 'base.html' %}

{% block title %}
Learner edit
{% endblock title %}

{% block content %}
<div class="panel panel-default">
    <div class="panel-heading">
        <h2 class="panel-title">Learner edit</h2>
    </div>
    <div class="panel-body">
        <div class="row">
            <div class="col-md-6">
                <p><strong>Do your best to replicate the "Goal" view. If you get stuck, just submit what you have.</strong></p>
                <h4>HTML</h4>
                <pre id="html"></pre>
                <h4>CSS</h4>
                <div id="cssEditor" data-intro="Write CSS here."></div>
            </div>
            <div class="col-md-6">
                <img id="mock" class="hide" data-src="{{ image }}">
                <h4>Preview:</h4>
                <div style="position: relative; height: 200px;" data-intro="This area displays the 'Goal' view and your rendered HTML+CSS (alternating every second, by default). When the 'Goal' view is displayed, you can click any part of it to get the Hex value at that pixel. We recommend turning off Auto-Toggle to do this.">
                    <canvas id="mockCanvas"></canvas>
                </div>
                <h4>Goal: <small>(Clicked color: <span id="color"></span>)</small></h4>
                <canvas id="goal"></canvas>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="btn btn-lg btn-block btn-primary" id="submit">Submit</div>
            </div>
        </div>


    </div>
</div>
{% endblock content %}

{% block script %}
<script type="text/javascript">
    var task = JSON.parse(('{{ status }}')
            .replace(/&#39;/g, '"')
            .replace(/&#34;/g, '"')
            .replace(/&lt;/g, '<')
            .replace(/&gt;/g, '>'));

    PWAP.state = task.state;
    PWAP.rects = task.rects;
    PWAP.class = task.class;
    PWAP.html = ('{{ html }}')
            .replace(/&#39;/g, '"')
            .replace(/&#34;/g, '"')
            .replace(/&lt;/g, '<')
            .replace(/&gt;/g, '>');

    jQuery(function() {
        PWAP.bsEditor();
    });
</script>
{% endblock script %}